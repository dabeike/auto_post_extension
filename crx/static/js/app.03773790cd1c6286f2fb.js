webpackJsonp([1],{"+GSR":function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",["checkbox"===t.option.type?o("el-checkbox-group",{staticClass:"option-item",model:{value:t.option.ans,callback:function(e){t.option.ans=e},expression:"option.ans"}},[t._l(t.option.group,function(e,n){return[o("el-checkbox",{key:e.key,attrs:{label:e.key}},[e.href?o("a",{attrs:{href:e.href,target:"_blank"}},[t._v("\n                    "+t._s(e.title)+"\n                ")]):o("span",[t._v(t._s(e.title))])]),t._v(" "),n!=t.option.group.length-1?["|"===t.option.order?o("br"):o("div",{staticClass:"split"},[t._v("|")])]:t._e()]})],2):"radio"===t.option.type?o("el-radio-group",{staticClass:"option-item",model:{value:t.option.ans,callback:function(e){t.option.ans=e},expression:"option.ans"}},[t._l(t.option.group,function(e,n){return[o("el-radio",{key:e.key,attrs:{label:e.key}},[e.href?o("a",{attrs:{href:e.href,target:"_blank"}},[t._v("\n                    "+t._s(e.title)+"\n                ")]):o("span",[t._v(t._s(e.title))])]),t._v(" "),n!=t.option.group.length-1?["|"===t.option.order?o("br"):o("div",{staticClass:"split"},[t._v("|")])]:t._e()]})],2):"input"===t.option.type||"textarea"===t.option.type?o("div",{staticClass:"option-item"},[t._v("\n        "+t._s(t.option.title)+"：\n\n        "),o("el-input",{staticStyle:{"margin-top":"5px"},attrs:{type:t.option.type,size:"small",placeholder:"请输入内容",icon:"edit"},model:{value:t.option.ans,callback:function(e){t.option.ans=e},expression:"option.ans"}})],1):t._e()],1)},a=[],s={render:n,staticRenderFns:a};e.a=s},"6SWS":function(t,e){},EzYM:function(t,e,o){"use strict";var n=o("mvHQ"),a=o.n(n),s=o("SG1Q"),l=o("+sNg");o.n(l);e.a={name:"post_item",components:{Groups:s.a},props:["options"],data:function(){return{button_loading:!1,payload_list:[],responseType:"",responseTitle:"",responseDetail:"",showResponse:!1,hide_more:!0,payload_callback:null}},computed:{alertContent:function(){return this.markdown2html(this.responseDetail)}},methods:{click_button:function(){var t=this;this.button_loading=!0,this.closeAlert();var e={options:a()(this.options)};this.payload_callback&&(e={payload_list:a()(this.payload_list),payload_callback:a()(this.payload_callback)}),$.post(host+"/api/dzw/get_payload",e,function(e){t.payload_callback=null,200===e.code?(console.log(e.data),t._key=e.data._key,e.data.callback&&(t.payload_callback=e.data.callback),t.post_all(e.data.payloads)):(t.button_loading=!1,t.responseType="error",t.responseTitle=e.msg,t.responseDetail=e.data,t.responseDetail&&t.responseDetail.length>0&&(t.showResponse=!0),t.$notify({message:e.msg,type:"error",showClose:!0,duration:2500,customClass:"notify_box"}))},"json")},post_all:function(t){this.payload_list=t;for(var e=0;e<t.length;e++){var o=t[e];$.ajax({type:o.method.toUpperCase(),url:o.url,data:o.data,success:this.successRes(o),error:this.errorRes(o)})}},successRes:function(t){var e=this;return function(o,n){console.log("success",n,o),t._finish=!0,t.res={status:200,data:o},e.check_all_finish()}},errorRes:function(t){var e=this;return function(o,n,a){console.log("error",o.status,o.readyState,a),t._finish=!0,t.res={status:o.status,readyState:o.readyState,msg:a},e.check_all_finish()}},check_all_finish:function(){for(var t=this,e=!0,o=0;o<this.payload_list.length;o++){if(!this.payload_list[o]._finish){e=!1;break}}e&&(this.button_loading=!1,this.payload_callback?this.click_button():$.post(host+"/api/dzw/deal_response",{_key:this.options._key,payloads:a()(this.payload_list)},function(e){t.responseType=e.code,t.responseTitle=e.message,t.responseDetail=e.data,t.responseDetail.length>0&&(t.showResponse=!0),t.$notify({message:e.msg,type:e.code,showClose:!0,duration:2500,customClass:"notify_box"})},"json"))},closeAlert:function(){this.showResponse=!1,this.responseType="",this.responseTitle="",this.responseDetail=""},markdown2html:function(t){t=t.replace(/\n/g,"  \n"),console.log(l.markdown,l.markdown.Markdown),delete l.markdown.Markdown.dialects.Gruber.inline._,delete l.markdown.Markdown.dialects.Gruber.inline.__;var e=l.markdown.toHTML(t);console.log(t),console.log(e);var o=document.createElement("div");o.innerHTML=e;for(var n=o.getElementsByTagName("a"),a=0;a<n.length;a++)n[a].target="_blank";return e=o.innerHTML,console.log(e),e},switch_hide_more:function(){this.hide_more=!this.hide_more}}}},M93x:function(t,e,o){"use strict";function n(t){o("aYZn")}var a=o("xJD8"),s=o("nCGX"),l=o("VU/8"),i=n,r=l(a.a,s.a,i,null,null);e.a=r.exports},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("/5sW"),a=o("M93x"),s=o("zL8q"),l=o.n(s),i=o("tvR6");o.n(i);n.default.use(l.a),n.default.config.productionTip=!1,new n.default({el:"#app",render:function(t){return t(a.a)}})},"PS+u":function(t,e,o){"use strict";e.a={name:"groups",props:["option"],data:function(){return{}}}},Q0YQ:function(t,e,o){"use strict";function n(t){o("eSzv")}var a=o("EzYM"),s=o("kjvz"),l=o("VU/8"),i=n,r=l(a.a,s.a,i,"data-v-3f53c4b4",null);e.a=r.exports},SG1Q:function(t,e,o){"use strict";function n(t){o("6SWS")}var a=o("PS+u"),s=o("+GSR"),l=o("VU/8"),i=n,r=l(a.a,s.a,i,"data-v-0652dc75",null);e.a=r.exports},aYZn:function(t,e){},eSzv:function(t,e){},kjvz:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",{staticClass:"card_box"},[o("el-row",{staticClass:"title",attrs:{slot:"header"},slot:"header"},[o("el-col",{attrs:{span:10}},[t._v("\n            "+t._s(t.options.title)+"：\n        ")]),t._v(" "),o("el-col",{attrs:{span:10}},[o("el-button",{attrs:{type:"primary",round:"",plain:"",size:"mini",loading:t.button_loading},on:{click:t.click_button}},[t._v("\n                "+t._s(t.options.button)+"\n            ")])],1)],1),t._v(" "),o("el-row",{staticClass:"description"},[o("div",[t.showResponse?o("el-alert",{attrs:{title:t.responseTitle,type:t.responseType},on:{close:t.closeAlert}},[o("div",{domProps:{innerHTML:t._s(t.alertContent)}})]):t._e(),t._v(" "),o("div",[t.options.description.extra&&t.options.description.extra.length>0?o("div",{class:t.hide_more?"hide_more":""},t._l(t.options.description.extra,function(t){return o("Groups",{attrs:{option:t}})})):t._e()]),t._v(" "),o("p",[t._v(t._s(t.options.description.content))])],1)])],1)},a=[],s={render:n,staticRenderFns:a};e.a=s},nCGX:function(t,e,o){"use strict";var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("div",[o("el-card",{staticClass:"call_all_box"},[t.autoCall?t._e():o("el-button",{attrs:{type:"success",round:"",size:"mini"},on:{click:t.call_all}},[t._v("一键打 Call")]),t._v(" "),o("el-switch",{style:t.autoCall?"":"float:right",attrs:{"on-text":t.autoCall?"启动时自动打 call":"手动打"},model:{value:t.autoCall,callback:function(e){t.autoCall=e},expression:"autoCall"}})],1),t._v(" "),t._l(t.Items,function(t){return o("PostItem",{ref:"posts",refInFor:!0,attrs:{options:t}})})],2)])},a=[],s={render:n,staticRenderFns:a};e.a=s},tvR6:function(t,e){},xJD8:function(t,e,o){"use strict";var n=o("BO1k"),a=o.n(n),s=o("Q0YQ");if(chrome&&chrome.extension){var l=chrome.extension.getBackgroundPage();console.log("chrome mode"),l.init()}else console.log("dev mode"),window.host="";e.a={name:"app",components:{PostItem:s.a},created:function(){var t=this;$.get(window.host+"/api/dzw/main_page",{},function(e){200===e.code&&(t.Items=e.data,t.autoCall&&setTimeout(t.call_all,1e3))},"json")},data:function(){return{Items:{},autoCall:1==localStorage.autoCall}},methods:{call_all:function(){console.log(this.$refs);var t=this.$refs.posts,e=!0,o=!1,n=void 0;try{for(var s,l=a()(t);!(e=(s=l.next()).done);e=!0){var i=s.value;console.log(i),i.click_button()}}catch(t){o=!0,n=t}finally{try{!e&&l.return&&l.return()}finally{if(o)throw n}}}},watch:{autoCall:function(t){localStorage.autoCall=t?1:0,console.log(localStorage.autoCall)}}}}},["NHnr"]);
//# sourceMappingURL=app.03773790cd1c6286f2fb.js.map